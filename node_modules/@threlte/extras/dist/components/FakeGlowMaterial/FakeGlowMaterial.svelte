<script>import { T, useThrelte, forwardEventHandlers } from '@threlte/core';
import { Color, AdditiveBlending, ShaderMaterial } from 'three';
import { fragmentShader } from './fragment';
import { vertexShader } from './vertex';
export let falloff = 0.1;
export let glowInternalRadius = 6.0;
export let glowColor = 'green';
export let glowSharpness = 1.0;
let material = new ShaderMaterial({
    uniforms: {
        falloff: { value: falloff },
        glowInternalRadius: { value: glowInternalRadius },
        glowColor: { value: new Color(glowColor) },
        glowSharpness: { value: glowSharpness }
    }
});
let { invalidate } = useThrelte();
$: {
    material.uniforms.falloff.value = falloff;
    material.uniforms.glowInternalRadius.value = glowInternalRadius;
    material.uniforms.glowColor.value = new Color(glowColor);
    material.uniforms.glowSharpness.value = glowSharpness;
    invalidate();
}
const component = forwardEventHandlers();
</script>

<T
  is={material}
  bind:this={$component}
  {fragmentShader}
  {vertexShader}
  transparent={true}
  blending={AdditiveBlending}
  depthTest={false}
  {...$$restProps}
>
  <slot ref={material} />
</T>
